<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, intial-scale=1.0">
<link rel="stylesheet" href="astyle.css">
<title>Dashboard</title>
<link
    href="https://cdn.jsdelivr.net/npm/remixicon@4.4.0/fonts/remixicon.css"
    rel="stylesheet"
/>
</head>
<body>
<!----------------navbar---------------->
<aside class="sidebar">
		<div class="header">
		<img src="logo.jpg">
			<h1>Start Early</h1>
		</div>
		<nav>
			<a href="HOME_PAGE.html">
			<i class="ri-home-3-line"></i>
			<p>Home</p>
			</a>
			<a href="course.html">
			<i class="ri-contacts-book-3-line"></i>
			<p>Courses</p>
			</a>
			<a href="Dashboard.html">
			<i class="ri-dashboard-line"></i>
			<p>Dashboard</p>
			</a>
			<a href="user.html">
			<i class="ri-user-3-line"></i>
			<p>User</p>
			</a>
		</nav>
	</aside>
<!----------navbar-ending---------------->
<div class="wrapper">
<nav class="nav">
<div class="nav-logo">
<p>Dashboard</p>
</div>
<div class="nav-menu" id="navmenu">
<ul>
<li><a href="Dashboard.html" class="link">Course Progress</a></li>
<li><a href="assignment.html" class="link">Assignment Progress</a></li>
</ul>
</div>
</nav></div>
<!-- --------name----------- -->
<div class="intro">
	<p>Hello <span id=username></span></p>
</div>
<!------------assignment progress------------------>
<div class="title">
	<p><u><center>ASSIGNMENT PROGRESS</center></u></p>
</div>
<div class="form-box">
    <p>English</p>
    Assingment 1:
    <span class="stars" id="english-stars"></span>
</div>

<div class="form-box2">
    <p>Tamil</p>
    Assingment 2:
    <span class="stars" id="tamil-stars"></span>
</div>

<div class="form-box3">
    <p>Hindi</p>
    Assingment 3:
    <span class="stars" id="hindi-stars"></span>
</div>

<div class="form-box4">
    <p>Maths</p>
    <div>Assingment 4:</div>
    <span class="stars" id="maths-stars"></span>
</div>

</body>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function () {
    fetch("getUsername")
        .then(response => response.json())
        .then(data => {
            document.getElementById("username").textContent = data.username;
        })
        .catch(error => console.error("Error fetching username:", error));

    fetch("AssignmentProgressServlet")
        .then(response => response.json())
        .then(data => {
            console.log("Received data:", data);

            let subjects = {
                "English": "english-stars",
                "Tamil": "tamil-stars",
                "Hindi": "hindi-stars",
                "Maths": "maths-stars"
            };

            data.forEach(item => {
                if (item.subject && subjects[item.subject]) {
                    let starsContainer = document.getElementById(subjects[item.subject]);
                    starsContainer.innerHTML = "⭐".repeat(item.stars);
                }
            });
        })
        .catch(error => console.error("Error fetching assignment progress:", error));
});

</script>
</html>